{% extends 'layout.html' %}
{% load static %}
{% block head %}
    <link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/css/dataTables.bootstrap4.min.css' %}"/>
    <link rel="stylesheet" href="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/css/responsive.bootstrap4.min.css' %}"/>
    <script src="{% static 'lib/datatables-1.10.20/js/jquery.dataTables.js' %}"></script>
    <script src="{% static 'lib/datatables-1.10.20/js/dataTables.bootstrap4.min.js' %}"></script>
    <script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/dataTables.responsive.min.js' %}"></script>
    <script src="{% static 'lib/datatables-1.10.20/plugins/responsive-2.2.3/js/responsive.bootstrap4.min.js' %}"></script>
    


    {% block head_list %}
    <link href="{% static 'css/material-icons.css' %}" rel="stylesheet"><!--Bajar está librería-->
    <link href="{% static 'css/materialize.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
    <link href="{% static 'css/style.css' %}" type="text/css" rel="stylesheet" media="screen,projection"/>
    
    <!--  Scripts-->
    <script src="{% static 'js/jquery-2.1.1.min.js'%}"></script><!--Bajar está librería-->
    <script src="{% static 'js/materialize.js' %}"></script>
    <script src="{% static 'js/init.js' %}"></script>
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor-init.js' %}"></script>
    <script type="text/javascript" src="{% static 'ckeditor/ckeditor/ckeditor.js' %}"></script>

    {% endblock %}

{% endblock %}

{% block content %}
<div class="card card-primary">
  <div class="card-header">
      <h3 class="card-title">
        {{course}}
      </h3>
  </div>
  <div class="card-body">
      <table class="table" id="data">
        <thead>
        {%block colums%}
          <div class="section">
            <h4>{{ course.nombre }}</h4>
            <div class="divider"></div>
          </div>

          <div class="row">

            <div class="col s3">
              <ul class="collection with-header">
                <li class="collection-header"><h4><i class="fas fa-chalkboard"> Aula</i></h4></li>
                <a href="{% url 'srea:course' course.id %}" class="collection-item"><i class="fas fa-home"> Inicio</i></a>
                <a href="{% url 'srea:primeraU' course.id %}" class="collection-item active"><i class="fas fa-folder"> Unidad </i></a>
                <!--<a href="#" class="collection-item">Submissions</a>
                <a href="#" class="collection-item">Preguntas</a>-->
                <a href="{% url 'srea:estudiantes' course.id %}" class="collection-item"><i class="fas fa-users"> Participantes </i></a>
                
                
                <a href="{% url 'srea:registrar-quiz' course.id  %}" class="collection-item"><i class="far fa-save"> Registrar quiz por unidad</i></a>
                
                <a href="{% url 'srea:p_file' %}" class="collection-item"><i class=" fas fa-download"> Formato quiz</i></a>
                {% if not request.user.is_staff %}
                  <a href="{% url 'srea:mensaje_asignatura' course.id %}" class="collection-item"><i class="far fa-comment"> Indicaciones</i></a>
                {% endif %}
                {% if teacher_mode == True%}
                {% endif %}
                
                {% if request.user.is_staff %}
                <a href="{% url 'srea:registrar-quiz-user' course.id  %}" class="collection-item"><i class="far fa-save"> Registrar quiz por docente</i></a>
                        
                {% endif %}
                  
              </ul>
            </div>

            <div class="col s9">

              {% if teacher_mode == True %}
              <a href="{% url 'srea:unidad' course.id %}" class="btn-floating btn-large waves-effect waves-light red right"><i class="material-icons">add</i></a>
              {% endif %}
              
              {% if request.user.is_staff %}
              <a href="{% url 'srea:unidad' course.id %}" class="btn-floating btn-large waves-effect waves-light red right"><i class="material-icons">add</i></a>
              
              {% endif %}
                
              <div class="section">
                <h4>Unidades</h4>
                <div class="divider"></div>
                <ul class="collapsible">
                    {% for u in course.unidad.all %}
                        <li>
                            <div class="collapsible-header"><i class="material-icons">expand_more</i><b>{{ u.nombre }}</b>
                              {% if   request.user == course.docente or request.user.is_staff %}
                                <hr><a href="{% url 'srea:act-unidad' course.id u.id  %}"><i class="fa fa-edit"></i></a>
                                <a href="{% url 'srea:delete_unidad' u.id %}"><i class="fas fa-trash-alt"></i></a>
                              {% endif %}
                            </div>
                            <div class="collapsible-body">
                             
                              <div class="collection">
                                {% for quiz in u.unidad_quiz.all  %}
                                 
                                    <a href="{% url 'srea:quiz-detail' course.id u.id quiz.quiz.id %}" class="collection-item"><i class="material-icons">fact_check</i>                                                                    
                                      {{quiz.quiz.name}}                               
        
                                    </a>
                                {% endfor %}
                             
                              </div>
                              {% if request.user == course.docente or request.user.is_staff %}
                                <div class="collection">
                                </div>
                              {% endif %}
                            </div>
                        </li>
                                              
                    {% endfor %}

                </ul>
                
              </div>
            </div>
          </div> 
        {%endblock%}
        </thead>
        <tbody>
        {%block rows%}

        {%endblock%}
        </tbody>
      </table>
  </div>
</div>
{% endblock %}

