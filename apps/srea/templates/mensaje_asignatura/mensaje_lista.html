{% extends 'base_list.html' %}
{% load widget_tweaks %}
{% load static %}
{%block title%}Lista de Mensajes{%endblock%}
{% block head_list %}
    
{% endblock %}
{%block colums%}
<tr>
    <th scope="col" style="width: 16%;">Titulo</th>
    <th scope="col" style="width: 20%;">Fecha</th>
    <th scope="col" style="width: 15%;">Opciones</th>
</tr>
{%endblock%}

{%block rows%}
    {% for c in mensaje %}
    <tr>           
        <td>{{c.titulo}}</td>
        <td>{{c.fecha}}</td>  
        <td>
        {% if not request.user.is_staff %}
          {% for g in request.user.groups.all %}
            {% if g.name == "Docente" %}
                <a href="/srea/editar_mensaje_asignatura/{{asigna.id}}/{{c.id}}/" class="btn btn-warning btn-xs btn-flat"><i class="fas fa-edit"></i></a>
                <a href="/srea/eliminar_mensaje_asignatura/{{asigna.id}}/{{c.id}}/" class="btn btn-danger btn-xs"><i class="fas fa-trash-alt"></i></a>
            {% endif %}
          {% endfor %}
        {% endif %}
        <button onclick="abrir_modal('{% url 'srea:ver_mensajes' c.id %}')" rel="edit" class="btn btn-primary btn-xs btnAdd"><i class="fa fa-search"> Ver</i></button>
        </td><!--/user/facultad_list/u_facultad/{{f.id}}ddddd{{request.user.id}}-->
        </tr>
    {% endfor %}

    <div class="modal fade" id="edicion" role="dialog">

    </div>
{%endblock%}

{% block buttons_list %}
{% if not request.user.is_staff %}
    {% for g in request.user.groups.all %}
        {% if not g.name == "Estudiante" %}
            <a href="{% url 'srea:crear_mensajes' asigna.id %}" class="btn btn-primary btn-flat btnAdd" style="color: white;">
                <i class="fas fa-plus"></i> Nuevo registro
            </a>
        {% endif %}
    {% endfor %}
{% endif %}
    <a href="{{url_list}}" class="btn btn-success btn-flat">
        <i class="fas fa-sync"></i> Actualizar
    </a>
{% endblock %}

{% block javascript %}
    var $ = JQuery.noConflict();
    <script type="application/javascript">
        $(function(){
            $('#data').DataTable({
            responsive: true,
            autoWidth: false
            });
        });

        function abrir_modal(url){
            $('#edicion').load(url, function(){
                $(this).modal('show');
            });
        }
    </script>
{% endblock %}


